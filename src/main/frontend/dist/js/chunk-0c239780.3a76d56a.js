(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c239780"],{"1c95":function(t,e,i){},e4e1:function(t,e,i){"use strict";i("1c95")},f5e2:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("vx-card",{attrs:{title:t.$t("sellPriceDetail")}},[e("vx-card",{staticClass:"mt-0",attrs:{id:"internal-card",title:"","no-shadow":"","card-border":""}},[e("table",{attrs:{data:t.sampleData}},[e("tr",[e("th",[t._v(t._s(t.$t("inventoryGenericName"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.inventoryGenericName))]),e("th",[t._v(t._s(t.$t("dosageForm"))+":")]),e("td",{staticClass:"w-1/5"},[t._v(t._s(t.inventoryDetail.invenoryDetail.dosageForm))]),e("th",{staticClass:"w-1/5"},[t._v(t._s(t.$t("strength"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.strength))])]),e("tr",[e("th",[t._v(t._s(t.$t("brandName"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.inventoryBrandName))]),e("th",[t._v(t._s(t.$t("measuringUnit"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.measuringUnit))]),e("th",[t._v(t._s(t.$t("volume"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.volume))])]),e("tr",[e("th",[t._v(t._s(t.$t("category"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.inventoryType))]),e("th",[t._v(t._s(t.$t("subCategory"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.subCategory))]),e("th",[t._v(t._s(t.$t("availableQuantity"))+":")]),e("td",[t._v(t._s(t.inventoryDetail.invenoryDetail.availableQuantity))])])]),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col sm:w-full md:w-full lg:w-1/4"},[e("vs-dropdown",{attrs:{"vs-custom-content":"","vs-trigger-click":""}},[e("div",{staticClass:"p-4 w-16 mb-2 border border-solid d-theme-border-grey-light d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium",staticStyle:{height:"30px"}},[e("span",{staticClass:"mr-2"},[e("p",[t._v(t._s(t.limit))])]),e("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e("vs-dropdown-menu",[e("vs-dropdown-item",[e("span",{on:{click:function(e){return t.pageLimit(15)}}},[t._v("15")])]),e("vs-dropdown-item",[e("span",{on:{click:function(e){return t.pageLimit(25)}}},[t._v("25")])]),e("vs-dropdown-item",[e("span",{on:{click:function(e){return t.pageLimit(50)}}},[t._v("50")])]),e("vs-dropdown-item",[e("span",{on:{click:function(e){return t.pageLimit(75)}}},[t._v("75")])])],1)],1)],1),e("div",{staticClass:"vx-col buttons"},[e("span",[e("vs-button",{attrs:{size:"small",color:"success"},on:{click:function(e){t.insertSellPricePopUp=!0}}},[t._v(t._s(t.$t("setSellPrice"))+"\n          ")]),t.isAdmin?e("vs-button",{staticClass:"ml-2",attrs:{size:"small",color:"success"},on:{click:function(e){t.inventoryTransactionPopUp=!0,t.getInventoryDetail()}}},[t._v(t._s(t.$t("otherTransactions")))]):t._e()],1)])]),t.isAdmin?e("vs-table",{staticClass:"stripe",attrs:{"max-items":t.page,data:t.inventoryDetail.inventoryPriceList},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.data;return t._l(n,(function(i,a){return e("vs-tr",{key:a,attrs:{state:n[a].activeSellPrice?"success":null,data:i}},[e("vs-td",{attrs:{data:n[a].sellPrice}},[t._v(t._s(n[a].sellPrice.toLocaleString("en-US"))+" USD\n          ")]),t.isAdmin?e("vs-td",{attrs:{data:n[a].discountAmount}},[t._v("\n            "+t._s(n[a].discountAmount.toLocaleString("en-US"))+" USD")]):t._e(),e("vs-td",{attrs:{data:n[a].effectiveDateTime}},[t._v("\n            "+t._s(t.getDateFormatted(n[a].effectiveDateTime)))])],1)}))}}],null,!1,1542129767)},[e("template",{slot:"thead"},[e("vs-th",{attrs:{getcustomerreport:"","sort-key":"sellPrice"}},[t._v(t._s(t.$t("sellPrice")))]),t.isAdmin?e("vs-th",{attrs:{"sort-key":"Discount"}},[t._v(t._s(t.$t("Discount")))]):t._e(),e("vs-th",{attrs:{"sort-key":"Discount"}},[t._v(t._s(t.$t("effectiveDateTime")))])],1)],2):t._e(),t.isCustomer||t.isCustomerAdmin?e("vs-table",{staticClass:"stripe",attrs:{"max-items":t.page,data:t.customerInventoryPriceList},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.data;return t._l(n,(function(i,a){return e("vs-tr",{key:a,attrs:{state:n[a].activeSellPrice?"success":null,data:i}},[e("vs-td",{attrs:{data:n[a].sellPrice}},[t._v(t._s(n[a].sellPrice.toLocaleString("en-US"))+" USD\n          ")]),e("vs-td",{attrs:{data:n[a].effectiveDateTime}},[t._v("\n            "+t._s(t.getDateFormatted(n[a].effectiveDateTime)))])],1)}))}}],null,!1,3996438382)},[e("template",{slot:"thead"},[e("vs-th",{attrs:{getcustomerreport:"","sort-key":"sellPrice"}},[t._v(t._s(t.$t("sellPrice")))]),e("vs-th",{attrs:{"sort-key":"Discount"}},[t._v(t._s(t.$t("effectiveDateTime")))])],1)],2):t._e(),e("vs-pagination",{attrs:{total:t.totalPage},on:{change:function(e){return t.getInventoryDetail()}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),e("vs-prompt",{attrs:{classContent:"popup-example",title:"Edit Cost Sell Price","buttons-hidden":"",active:t.inventoryPricePopUp},on:{cancel:function(e){t.quantity="",t.costOfInventory="",t.sellPrice="",t.discountAmount=""},accept:function(e){return t.updateInventoryCostSellPrice()},"update:active":function(e){t.inventoryPricePopUp=e}}},[e("div",[""!=t.validationError?e("vs-alert",{attrs:{color:"danger","icon-pack":"feather",icon:"icon-info"}},[e("span",[t._v(t._s(t.validationError))])]):t._e(),e("div",{staticClass:"vx-row"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{"data-vv-validate-on":"blur",label:t.$t("quantity"),name:t.quantity},on:{change:t.resetValidationError},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{label:t.$t("cost"),name:t.costOfInventory,"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.costOfInventory,callback:function(e){t.costOfInventory=e},expression:"costOfInventory"}}),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{name:t.sellPrice,label:t.$t("sellPrice"),"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.sellPrice,callback:function(e){t.sellPrice=e},expression:"sellPrice"}}),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{label:t.$t("discountAmount"),name:t.discountAmount,"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.discountAmount,callback:function(e){t.discountAmount=e},expression:"discountAmount"}})],1)],1),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("status")))]),e("div",{staticClass:"flex items-stretch mt-5"},[e("vs-button",{staticClass:"flex-1",attrs:{color:"success",type:"filled"},on:{click:function(e){return e.preventDefault(),t.updateInventoryCostSellPrice()}}},[t._v("\n        "+t._s(t.$t("Save")))])],1)]),e("vs-prompt",{attrs:{classContent:"popup-example",title:"Insert Sell Price","buttons-hidden":"",active:t.insertSellPricePopUp},on:{cancel:function(e){t.inventorySellPriceDetail.availableQuantity="",t.inventorySellPriceDetail.effectiveDateTime="",t.inventorySellPriceDetail.sellPrice="",t.inventorySellPriceDetail.discountAmount=""},accept:function(e){return t.insertInventorySellPrice()},"update:active":function(e){t.insertSellPricePopUp=e}}},[e("div",[""!=t.validationError?e("vs-alert",{attrs:{color:"danger","icon-pack":"feather",icon:"icon-info"}},[e("span",[t._v(t._s(t.validationError))])]):t._e(),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-1/2"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"w-full",attrs:{name:t.inventorySellPriceDetail.sellPrice,label:t.$t("sellPrice"),"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.inventorySellPriceDetail.sellPrice,callback:function(e){t.$set(t.inventorySellPriceDetail,"sellPrice",e)},expression:"inventorySellPriceDetail.sellPrice"}})],1),e("div",{staticClass:"vx-col w-1/2"},[e("span",[t._v(t._s(t.$t("effectiveDateTime")))]),e("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"validate",rawName:"v-validate:effectiveDateTime",value:"required",expression:"'required'",arg:"effectiveDateTime"}],staticClass:"w-full",attrs:{config:t.configdateTimePicker,"data-vv-validate-on":"blur","data-vv-scope":"specimen",name:t.inventorySellPriceDetail.effectiveDateTime},on:{change:t.resetValidationError},model:{value:t.inventorySellPriceDetail.effectiveDateTime,callback:function(e){t.$set(t.inventorySellPriceDetail,"effectiveDateTime","string"===typeof e?e.trim():e)},expression:"inventorySellPriceDetail.effectiveDateTime"}})],1)]),t.isAdmin?e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-1/2"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"w-full",attrs:{label:t.$t("discountAmount"),name:t.inventorySellPriceDetail.discountAmoun,"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.inventorySellPriceDetail.discountAmount,callback:function(e){t.$set(t.inventorySellPriceDetail,"discountAmount",e)},expression:"inventorySellPriceDetail.discountAmount"}})],1)]):t._e()],1),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("status")))]),e("div",{staticClass:"flex items-stretch mt-5"},[e("vs-button",{staticClass:"flex-1",attrs:{color:"success",type:"filled"},on:{click:function(e){return e.preventDefault(),t.insertInventorySellPrice()}}},[t._v("\n        "+t._s(t.$t("Save")))])],1)]),e("vs-prompt",{attrs:{classContent:"popup-example",title:"Add Transaction","buttons-hidden":"",active:t.inventoryTransactionPopUp},on:{cancel:function(e){t.inventoryTransaction.transactionType="",t.inventoryTransaction.quantity="",t.inventoryTransaction.sellPrice="",t.inventoryTransaction.cost=""},accept:function(e){return t.addTransaction()},"update:active":function(e){t.inventoryTransactionPopUp=e}}},[e("div",[""!=t.validationError?e("vs-alert",{attrs:{color:"danger","icon-pack":"feather",icon:"icon-info"}},[e("span",[t._v(t._s(t.validationError))])]):t._e(),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-1/2"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:t.inventoryTransaction.quantity,label:t.$t("quantity"),"data-vv-validate-on":"blur"},on:{change:function(e){return t.validateQuantity()}},model:{value:t.inventoryTransaction.quantity,callback:function(e){t.$set(t.inventoryTransaction,"quantity",e)},expression:"inventoryTransaction.quantity"}}),e("span",{staticClass:"text-danger"},[t._v(t._s(t.quantityValidationError))])],1),e("div",{staticClass:"vx-col w-1/2"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"data-vv-validate-on":"blur",label:t.$t("transactionType"),name:t.inventoryTransaction.transactionType},on:{change:t.resetValidationError},model:{value:t.inventoryTransaction.transactionType,callback:function(e){t.$set(t.inventoryTransaction,"transactionType",e)},expression:"inventoryTransaction.transactionType"}})],1)]),e("div",{staticClass:"vx-row"})],1),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("status")))]),e("div",{staticClass:"flex items-stretch mt-5"},[e("vs-button",{staticClass:"flex-1",attrs:{color:"success",type:"filled"},on:{click:function(e){return e.preventDefault(),t.addTransaction()}}},[t._v(t._s(t.$t("Save"))+"\n      ")])],1)])],1)},a=[],r=(i("41cb"),i("a433"),i("aae5")),s=i.n(r),o=(i("0952"),{components:{flatPickr:s.a},data:function(){return{sampleData:"",id:this.$route.params.id,inventoryDetail:"",limit:15,currentPage:1,totalPage:0,page:1,total:0,inventory:[],inventoryPricePopUp:!1,inventoryId:"",userId:localStorage.getItem("userId"),companyId:localStorage.getItem("companyId"),validationError:"",customerInventoryPriceList:[],configdateTimePicker:{enableTime:!0,dateFormat:"Y-m-dTH:i"},insertSellPricePopUp:!1,inventoryTransactionPopUp:!1,inventorySellPriceDetail:{sellPrice:"",discountAmount:"",effectiveDateTime:"",availableQuantity:""},inventoryTransaction:{quantity:"",sellPrice:"",cost:"",transactionType:""}}},methods:{getDateFormatted:function(t){return new Date(t).toLocaleDateString(["en-US"],{timeZone:"Africa/Nairobi",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},validateQuantity:function(){this.inventoryTransaction.quantity>this.inventoryDetail.availableQuantity?this.quantityValidationError="You couldn't enter above available quantity!":this.quantityValidationError=""},addTransaction:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){t.isLoading=!0,t.validationError="";var i=[],n={};n["inventoryId"]=t.id,n["transactionType"]=t.inventoryTransaction.transactionType,n["quantity"]=t.inventoryTransaction.quantity,n["costOfInventory"]=t.inventoryTransaction.cost,n["sellPrice"]=t.inventoryTransaction.sellPrice,i.push(n),t.$http.post("/inventorytransaction",i).then((function(e){t.inventoryTransactionPopUp=!1,t.inventoryTransaction.quantity="",t.inventoryTransaction.cost="",t.inventoryTransaction.sellPrice="",t.inventoryTransaction.transactionType="",t.isLoading=!1,t.$vs.notify({title:t.$t("Add"),text:t.$t("Added Successfully!"),iconPack:"feather",icon:"icon-alert-circle",color:"success"})})).catch((function(){t.isLoading=!1}))}else t.validationError="Please enter number on all fields"}))},insertInventorySellPrice:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.isLoading=!0,t.validationError="",t.isAdmin?t.$http.post("/inventorytransaction/sell-price",{inventoryId:t.id,sellPrice:t.inventorySellPriceDetail.sellPrice,discountAmount:t.inventorySellPriceDetail.discountAmount,effectiveDateTime:new Date(t.inventorySellPriceDetail.effectiveDateTime)}).then((function(e){t.insertSellPricePopUp=!1,t.inventorySellPriceDetail.availableQuantity="",t.inventorySellPriceDetail.effectiveDateTime="",t.inventorySellPriceDetail.sellPrice="",t.inventorySellPriceDetail.discountAmount="",t.isLoading=!1,t.$vs.notify({title:t.$t("Add"),text:t.$t("Added Successfully!"),iconPack:"feather",icon:"icon-alert-circle",color:"success"}),t.getInventoryDetail()})).catch((function(){t.isLoading=!1})):(t.isCustomerAdmin||t.isCustomer)&&t.insertCustomerInventorySellPrice()):t.validationError="Please enter number on all fields"}))},insertCustomerInventorySellPrice:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.isLoading=!0,t.validationError="",t.$http.post("/customer-inventory-sell-price",{inventoryId:t.id,sellPrice:t.inventorySellPriceDetail.sellPrice,effectiveDateTime:new Date(t.inventorySellPriceDetail.effectiveDateTime),companyId:t.companyId,customerId:t.userId}).then((function(e){t.insertSellPricePopUp=!1,t.inventorySellPriceDetail.effectiveDateTime="",t.inventorySellPriceDetail.sellPrice="",t.isLoading=!1,t.getAllCustomerInventorySellPrices(),t.$vs.notify({title:t.$t("Add"),text:t.$t("Added Successfully!"),iconPack:"feather",icon:"icon-alert-circle",color:"success"})})).catch((function(){t.isLoading=!1}))):(t.validationError="Please enter number on all fields",t.getAllCustomerInventorySellPrices())}))},updateInventoryCostSellPrice:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.isLoading=!0,t.validationError="",t.$http.post("/inventorytransaction").then((function(e){t.isLoading=!1,t.$vs.notify({title:t.$t("Add"),text:t.$t("Added Successfully!"),iconPack:"feather",icon:"icon-alert-circle",color:"success"})})).catch((function(){t.isLoading=!1}))):t.validationError="Please enter number on all fields"}))},resetValidationError:function(){this.validationError=""},search:function(t){},pageLimit:function(t){this.limit=t,45%this.limit!=0?this.total=Math.ceil(50/this.limit):this.total=45/this.limit},pagination:function(t){this.page=t,this.$http.get("/pricelist/"+this.id,{params:{page:this.page,limit:this.limit}}).then((function(t){this.inventory=t.data}))},getInventoryDetail:function(){var t=this;this.$http.get("/pricelist/"+this.id,{params:{page:t.currentPage,limit:t.limit}}).then((function(e){t.inventoryDetail=e.data,t.totalPage=e.data.inventoryPriceList[0].totalPage}))},getAllCustomerInventorySellPrices:function(){var t=this;this.$http.get("/customer-inventory-sell-price",{params:{inventoryId:this.id,page:t.currentPage,limit:t.limit,companyId:this.companyId}}).then((function(e){t.customerInventoryPriceList=e.data,t.totalPage=e.data[0].totalPages}))}},created:function(){this.getInventoryDetail(),(this.isCustomer||this.isCustomerAdmin)&&this.getAllCustomerInventorySellPrices()},computed:{getCurrentUser:function(){return{userType:localStorage.getItem("userType")}},isCustomer:function(){return"Customer"==this.getCurrentUser.userType},isCustomerAdmin:function(){return"CustomerAdmin"==this.getCurrentUser.userType},isAdmin:function(){return"Admin"==this.getCurrentUser.userType},getInventoryItem:function(){return this.$store.getters["inventory/getInventoryItemPriceDetail"](this.id)}}}),l=o,c=(i("e4e1"),i("2877")),v=Object(c["a"])(l,n,a,!1,null,"dc7afc16",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-0c239780.3a76d56a.js.map